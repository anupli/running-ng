<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>running-ng Documentation</title>
                <meta name="robots" content="noindex" />
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="favicon.svg">
                        <link rel="shortcut icon" href="favicon.png">
                <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
                <link rel="stylesheet" href="css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="intro.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="install.html"><strong aria-hidden="true">1.1.</strong> Installation</a></li></ol></li><li class="chapter-item expanded "><a href="basics/index.html"><strong aria-hidden="true">2.</strong> Basics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="basics/design.html"><strong aria-hidden="true">2.1.</strong> Design Principles</a></li><li class="chapter-item expanded "><a href="basics/conventions.html"><strong aria-hidden="true">2.2.</strong> Conventions</a></li></ol></li><li class="chapter-item expanded "><a href="references/index.html"><strong aria-hidden="true">3.</strong> Core References</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="references/suite.html"><strong aria-hidden="true">3.1.</strong> Benchmark Suite</a></li><li class="chapter-item expanded "><a href="references/runtime.html"><strong aria-hidden="true">3.2.</strong> Runtime</a></li><li class="chapter-item expanded "><a href="references/modifier.html"><strong aria-hidden="true">3.3.</strong> Modifier</a></li></ol></li><li class="chapter-item expanded "><a href="commands/index.html"><strong aria-hidden="true">4.</strong> Command References</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="commands/runbms.html"><strong aria-hidden="true">4.1.</strong> runbms</a></li><li class="chapter-item expanded "><a href="commands/minheap.html"><strong aria-hidden="true">4.2.</strong> minheap</a></li><li class="chapter-item expanded "><a href="commands/fillin.html"><strong aria-hidden="true">4.3.</strong> fillin</a></li></ol></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title">running-ng Documentation</h1>

                    <div class="right-buttons">
                                                <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p><code>running-ng</code> is a collection of scripts that help people run workloads in a methodologically sound settings.</p>
<h2 id="disclaimer"><a class="header" href="#disclaimer">Disclaimer</a></h2>
<p>At this stage, the focus of this project is driven by the internal use of members from <a href="https://users.cecs.anu.edu.au/%7Esteveb/">Steve Blackburn</a>'s lab.
If you are a member of the lab, you know what to do if you encounter any issue, and you can ignore the below.</p>
<p>If you are a member of the public, please kindly note that the project is open-source and documented on a &quot;good-faith&quot; basis.
We might not have the time to consider your features requests.
Please don't be offended if we ignore these.
Having said that, you are very welcomed to use it, and we will be very pleased if this helps anyone.
In particular, we are grateful if you report bugs you found with steps to reproduce it.</p>
<h2 id="-warning"><a class="header" href="#-warning">⚠️ Warning</a></h2>
<p>The syntax (of configuration files and command line arguments) of <code>running-ng</code> is not stabilized yet.
When you use it, expect breaking changes, although we will try to minimize this where possible.</p>
<p><code>running-ng</code> has been tested by few people, and we think it is stable enough to use for your experiments.
However, there are probably few wrinkles to be ironed out.
Please file any bug or feature request on <a href="https://github.com/caizixian/running-ng/issues">the issue tracker</a>.</p>
<p>You are also welcome to implement new features and/or fix bugs by opening <a href="https://github.com/caizixian/running-ng/pulls">pull requests</a>.
But before you do so, please discuss with <a href="https://github.com/steveblackburn">Steve</a> first for major design changes.
For non-user-facing changes, please discuss with the <a href="intro.html#maintainers">maintainers</a> first.</p>
<h2 id="history"><a class="header" href="#history">History</a></h2>
<p>The predecessor of <code>running-ng</code> is <code>running</code>, a set of scripts written in Perl, dating back to 2005.
However, the type of workloads we are evaluation has changed a bit, and we want a new set of scripts that fit our needs better.</p>
<p>Two major sources of inspiration are <a href="https://gitlab.anu.edu.au/mu/mu-perf-benchmarks"><code>mu-perf-benchmarks</code></a> and <a href="https://github.com/caizixian/menthol"><code>menthol</code></a>.</p>
<p><code>mu-perf-benchmarks</code> is a performance regression framework built for <a href="http://microvm.github.io/">The Mu Micro Virtual Machine</a>.
Zixian coauthored the framework with <a href="https://github.com/john5f35">John Zhang</a> in 2017.
It features <a href="https://gitlab.anu.edu.au/mu/mu-perf-benchmarks/-/tree/master/mubench">a web frontend</a> for displaying results.
You can see the live instance <a href="https://squirrel.anu.edu.au/mubench/">here</a>.</p>
<p><code>menthol</code> is a benchmarking framework built for running benchmarks in high-performance computing (HPC) settings.
Zixian built it for his <a href="https://www.zcai.org/cv/#chapel-scnc2101-2018">research project</a> about evaluating Chapel's performance in 2018.
The framework can run benchmarks in different languages on either single node or on a cluster through PBS job scheduler.</p>
<h2 id="maintainers"><a class="header" href="#maintainers">Maintainers</a></h2>
<ul>
<li><a href="https://www.zcai.org">Zixian Cai</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="installation"><a class="header" href="#installation">Installation</a></h1>
<p>For now, the best way to install <code>running-ng</code> is via source.</p>
<pre><code class="language-bash">git clone https://github.com/anupli/running-ng
cd running-ng
pip install -e . --user
# Add Python user install directory to your PATH
</code></pre>
<p>The <code>-e</code> option is used to allow quick update of <code>running-ng</code> by running <code>git pull</code>.
Once the codebase is more stabilized, other installation options, such as installing from PyPI, could be preferable.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="basics"><a class="header" href="#basics">Basics</a></h1>
<p><em>Briefly talk about how basic concepts fit together here...</em></p>
<p>Before diving into the details, please read <a href="basics/./design.html">the design principles</a> to help you better understand why things are organized in such way.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="design-principles"><a class="header" href="#design-principles">Design Principles</a></h1>
<h2 id="sound-methodology"><a class="header" href="#sound-methodology">Sound methodology</a></h2>
<p>Sound methodology is crucial for the type of performance analysis work we do.
Please see the documentation for each of the command for details.
We also try to include sensible default values in the base configuration files.</p>
<h2 id="reproducibility"><a class="header" href="#reproducibility">Reproducibility</a></h2>
<p>It should be easy to reproduce a set of experiments.
To this end, various commands will save as much metadata with the results.
For example, <a href="basics/../commands/runbms.html"><code>runbms</code></a> saves the flattened configuration file and command line arguments in the results folder.
For each log, basic information about the execution environment, such as <code>uname</code>, the model name of the CPU, and frequencies of CPU cores, is saved as well.</p>
<h2 id="extensibility"><a class="header" href="#extensibility">Extensibility</a></h2>
<p>Broadly, the project consists of two parts: the core and the commands.
The core provides abstractions for core concepts, such as benchmarks and execution environments, and can be extended through class inheritance.</p>
<p>The commands are the user-facing parts that uses the core to provide concrete functionalities.</p>
<h2 id="reusability"><a class="header" href="#reusability">Reusability</a></h2>
<p>The configuration files can be easily reused through the <code>includes</code> and <code>overrides</code> mechanisms.
For example, people might want to run multiple sets of experiments with minor tweaks, and being able to share a common base configuration file is ergonomic.
This is also crucial to the first point that people can get a set of sensible default values by including base configuration files shipped with the project.</p>
<h2 id="human-readable-syntax"><a class="header" href="#human-readable-syntax">Human-readable syntax</a></h2>
<p>We use YAML as the format for the configuration files.
Please read the <a href="basics/./syntax.html">syntax reference</a> for more details.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="conventions"><a class="header" href="#conventions">Conventions</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="configuration-file-syntax"><a class="header" href="#configuration-file-syntax">Configuration File Syntax</a></h1>
<p>The configuration file is in YAML format.
You can find a good YAML tutorial
<a href="https://docs.ansible.com/ansible/latest/reference_appendices/YAMLSyntax.html">here</a>.
Below is the documentation for all the top-level keys that are common to all
commands.</p>
<h2 id="benchmarks"><a class="header" href="#benchmarks"><code>benchmarks</code></a></h2>
<p>A YAML list of benchmarks to run in each specified <a href="references/index.html#suites">benchmark suite</a>.</p>
<p>For example:</p>
<pre><code class="language-yaml">benchmarks:
  dacapo2006:
    - eclipse
  dacapobach:
    - avrora
    - fop
</code></pre>
<p>specifies <code>running</code> to run the <code>eclipse</code> benchmark from the <code>dacapo2006</code>
benchmark suite; and the <code>avrora</code> and <code>fop</code> benchmarks from the <code>dacapobach</code>
benchmark suite. These benchmark suites have to be defined previously (usually
through an <a href="references/index.html#includes"><code>includes</code> key</a>).</p>
<h2 id="configs"><a class="header" href="#configs"><code>configs</code></a></h2>
<p>A YAML list of configuration strings to be used to run the benchmarks. These are
specified as a <a href="references/index.html#runtimes"><code>runtime</code></a> followed by a <code>'|'</code> separated list of
<a href="references/./modifier.html">modifiers</a>, i.e. <code>&quot;&lt;runtime&gt;|&lt;modifier&gt;|...|&lt;modifier&gt;&quot;</code>.</p>
<p>For example:</p>
<pre><code class="language-yaml">configs:
  - &quot;openjdk11|ms|s|c2&quot;
  - &quot;openjdk15|ms|s&quot;
</code></pre>
<p>specifies <code>running</code> to use the <code>openjdk11</code> <code>runtime</code> with <code>ms</code>, <code>s</code>, and <code>c2</code>
modifiers; and the <code>openjdk15</code> <code>runtime</code> with the <code>ms</code>, and <code>s</code> modifiers. In
the example above, we assume that both the <code>runtimes</code> and modifiers have been
previously defined (in either the current configuration file or in an <a href="references/index.html#includes"><code>includes</code>
file</a>).</p>
<h2 id="includes"><a class="header" href="#includes"><code>includes</code></a></h2>
<p>A YAML list of paths to YAML files that are to be included into the current
configuration file for definitions of some keys.</p>
<p>This is primarily used to provide re-usability and extensibility of
configuration files. A pre-processor step in <code>running</code> takes care of including
all the specified files. A flattened version of the final configuration file is
also generated and placed in the results folder for reproducibility.</p>
<p>For example:</p>
<pre><code class="language-yaml">includes:
 - &quot;./base/suites.yml&quot;
 - &quot;./base/modifiers.yml&quot;
</code></pre>
<p>includes the <code>suites.yml</code> and <code>modifiers.yml</code> files located at <code>./base</code>
respectively.</p>
<h2 id="modifiers"><a class="header" href="#modifiers"><code>modifiers</code></a></h2>
<p>A YAML dictionary of program arguments or environment variables that are to be
used with <a href="references/index.html#configs">config strings</a>. Cannot use <code>-</code> in the key for a modifier.
Each modifier requires a <code>type</code> key with other keys being specific to that
<code>type</code>. For more information regarding the different <code>type</code>s of modifiers,
please refer to <a href="references/./modifier.html">this page</a>.</p>
<p><strong>Warning preview feature ⚠️</strong>. We can exclude certain benchmarks from using a
specific modifier by using an <code>exclude</code> key along with a YAML list of benchmarks
to be excluded from each benchmark suite.</p>
<p>For example:</p>
<pre><code class="language-yaml">modifiers:
  s:
    type: JVMArg
    val: &quot;-server&quot;
  c2:
    type: JVMArg
    val: &quot;-XX:-TieredCompilation -Xcomp&quot;
    excludes:
      dacapo2006:
        - eclipse
</code></pre>
<p>specifies two modifiers, <code>s</code> and <code>c2</code>, both of <code>type</code>
<a href="references/./modifier.html#JVMArg"><code>JVMArg</code></a> with their respective values. Here, the
<code>eclipse</code> benchmark from the <code>dacapo2006</code> benchmark suite has been excluded from
the <code>c2</code> modifier.</p>
<h3 id="value-options"><a class="header" href="#value-options">Value Options</a></h3>
<p>These are special modifiers whose values can be specified through their use in a
<a href="references/index.html#configs">configuration string</a>. Concrete values are specified as <code>-</code> separated
values after the modifier's name in a configuration string. These values will be
indexed by the modifier through syntax similar to Python format strings.</p>
<p>This is best understood via an example:</p>
<pre><code class="language-yaml">modifiers:
  env_var:
    type: EnvVar
    var: &quot;FOO{0}&quot;
    val: &quot;{1}&quot;

[...]

configs:
  - &quot;openjdk11|env_var-42-43&quot;
</code></pre>
<p>specifies to run the <code>openjdk11</code> <a href="references/index.html#runtimes"><code>runtime</code></a> with the environment
variable <code>FOO42</code> set to <code>43</code>. Note that value options are not limited only to
environment variables, and can be used for all modifier <code>type</code>s.</p>
<h2 id="overrides"><a class="header" href="#overrides"><code>overrides</code></a></h2>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis
nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu
fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
culpa qui officia deserunt mollit anim id est laborum.</p>
<h2 id="runtimes"><a class="header" href="#runtimes"><code>runtimes</code></a></h2>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis
nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu
fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
culpa qui officia deserunt mollit anim id est laborum.</p>
<h2 id="suites"><a class="header" href="#suites"><code>suites</code></a></h2>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis
nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu
fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in
culpa qui officia deserunt mollit anim id est laborum.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="benchmark-suite"><a class="header" href="#benchmark-suite">Benchmark Suite</a></h1>
<h2 id="binarybenchmarksuite--preview-"><a class="header" href="#binarybenchmarksuite--preview-"><code>BinaryBenchmarkSuite</code>  (preview ⚠️)</a></h2>
<h2 id="dacapo"><a class="header" href="#dacapo"><code>DaCapo</code></a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="runtime"><a class="header" href="#runtime">Runtime</a></h1>
<h2 id="jikesrvm"><a class="header" href="#jikesrvm"><code>JikesRVM</code></a></h2>
<h2 id="nativeexecutable-preview-"><a class="header" href="#nativeexecutable-preview-"><code>NativeExecutable</code> (preview ⚠️)</a></h2>
<h2 id="openjdk"><a class="header" href="#openjdk"><code>OpenJDK</code></a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="modifier"><a class="header" href="#modifier">Modifier</a></h1>
<h2 id="envvar"><a class="header" href="#envvar"><code>EnvVar</code></a></h2>
<h2 id="jvmarg"><a class="header" href="#jvmarg"><code>JVMArg</code></a></h2>
<h2 id="jvmclasspath"><a class="header" href="#jvmclasspath"><code>JVMClasspath</code></a></h2>
<h2 id="programarg"><a class="header" href="#programarg"><code>ProgramArg</code></a></h2>
<div style="break-before: page; page-break-before: always;"></div><div style="break-before: page; page-break-before: always;"></div><h1 id="runbms"><a class="header" href="#runbms"><code>runbms</code></a></h1>
<h2 id="best-practices"><a class="header" href="#best-practices">Best practices</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="minheap"><a class="header" href="#minheap"><code>minheap</code></a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="fillin"><a class="header" href="#fillin"><code>fillin</code></a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
                        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
                
    </body>
</html>
