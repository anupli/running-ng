<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Benchmark Suite - running-ng Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">running-ng Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="benchmark-suite"><a class="header" href="#benchmark-suite">Benchmark Suite</a></h1>
<h2 id="binarybenchmarksuite--preview-"><a class="header" href="#binarybenchmarksuite--preview-"><code>BinaryBenchmarkSuite</code>  (preview ⚠️)</a></h2>
<p>A <code>BinaryBenchmarkSuite</code> is a suite of programs which can be used to run binary
benchmarks such as for C/C++ benchmarking.</p>
<h3 id="keys"><a class="header" href="#keys">Keys</a></h3>
<p><code>programs</code>: A yaml list of benchmarks in the format:</p>
<pre><code class="language-yaml">programs:
  &lt;BM_NAME_1&gt;:
    path: /full/path/to/benchmark/binary_1
    args: "Any arguments to binary_1"
  &lt;BM_NAME_2&gt;:
    path: /full/path/to/benchmark/binary_2
    args: "Any arguments to binary_2"
  [...]
</code></pre>
<p>A possible use-case could use wrapper shell scripts around the benchmark to
output timing and other information in a tab-separated table.</p>
<h2 id="dacapo"><a class="header" href="#dacapo"><code>DaCapo</code></a></h2>
<p><a href="https://www.dacapobench.org/">DaCapo benchmark suite</a>.</p>
<h3 id="keys-1"><a class="header" href="#keys-1">Keys</a></h3>
<p><code>release</code>: one of the possible values <code>["2006", "9.12", "evaluation"]</code>.
The value is required.</p>
<p><code>path</code>: path to the DaCapo <code>jar</code>.
The value is required.
Environment variables will be expanded.</p>
<p><code>minheap</code>: a string that selects one of the <code>minheap_values</code> sets to use.</p>
<p><code>minheap_values</code>: a dictionary containing multiple named sets of minimal heap sizes that is enough for a benchmark from the suite to run without triggering <code>OutOfMemoryError</code>.
Each size is measured in MiB.
The default value is an empty dictionary.
The minheap values are used only when running <code>runbms</code> with a valid <code>N</code> value.
If the minheap value for a benchmark is not specified, a default of <code>4096</code> is used.
An example looks like this.</p>
<pre><code class="language-yaml">minheap_values:
  adoptopenjdk-15-G1:
    avrora: 7
    batik: 253
  temurin-17-G1:
    avrora: 7
    batik: 189
</code></pre>
<p><code>timing_iteration</code>: specifying the timing iteration.
It can either be a number, which is passed to DaCapo as <code>-n</code>, or a string <code>converge</code>.
The default value is 3.</p>
<p><code>callback</code>: the class (possibly within some packages) for the DaCapo callback. The value is passed to DaCapo as <code>-c</code>.
The default value is <code>null</code>.</p>
<p><code>timeout</code>: timeout for one invocation of a benchmark in seconds.
The default value is <code>null</code>.</p>
<p><code>wrapper</code> (preview ⚠️): specifying a wrapper (i.e., extra stuff on the command line before <code>java</code>) when running benchmarks.
The default value is <code>null</code>, a no-op.
There are two possible ways to specify <code>wrapper</code>.
First, a single string with <a href="https://docs.python.org/3/library/shlex.html#shlex.split">shell-like syntax</a>.
Multiple arguments are space separated.
This wrapper is used for all benchmarks in the benchmark suite.
Second, a dictionary of strings with shell-like syntax to specify possibly different wrappers for different benchmarks.
If a benchmark doesn't have a wrapper in the dictionary, it is treated as <code>null</code>.</p>
<p><code>companion</code> (preview ⚠️): the syntax is similar to <code>wrapper</code>.
The companion program will start before the main program.
The main program will start two seconds after the companion program to make sure the companion is fully initialized.
Once the main program finishes, we will wait for the companion program to finish.
Therefore, companion programs should have appropriate timeouts or detect when main program finishes.
Here is an example of using <code>companion</code> to launch <code>bpftrace</code> in the background to count the system calls.</p>
<pre><code class="language-yaml">includes:
  - "$RUNNING_NG_PACKAGE_DATA/base/runbms.yml"

overrides:
  "suites.dacapo2006.timing_iteration": 1
  "suites.dacapo2006.companion": "sudo bpftrace -e 'tracepoint:raw_syscalls:sys_enter { @syscall[args-&gt;id] = count(); @process[comm] = count();} interval:s:10 { printf(\"Goodbye world!\\n\"); exit(); }'"
  "invocations": 1

benchmarks:
  dacapo2006:
    - fop

configs:
  - "temurin-17"
</code></pre>
<p>In the log file, the output from the main program and the output from the companion program is separated by <code>*****</code>.</p>
<p><code>size</code>: specifying the size of input data.
Note that the names of the sizes are subject to change depending on the DaCapo releases.
The default value is <code>null</code>, which means DaCapo will use the default size unless you override that for individual benchmarks.</p>
<h3 id="benchmark-specification"><a class="header" href="#benchmark-specification">Benchmark Specification</a></h3>
<p>Some of the suite-wide keys can be overridden in a per-benchmark-basis.
The keys currently supported are <code>timing_iteration</code>, <code>size</code>, and <code>timeout</code>.
Note that, within a suite, your choice of <code>name</code> should uniquely identify a particular way of running a benchmark of name <code>bm_name</code>.
The <code>name</code> is used to get the minheap value, etc., which can depend of the size of input data and/or the timing iteration.
Therefore, it is highly recommended that you give a <code>name</code> different from the <code>bm_name</code>.</p>
<p>Note that, you might need to adjust various other values, including but not limit to the minheap value dictionary and the modifier exclusion dictionary.</p>
<p>The following is an example.</p>
<pre><code class="language-yaml">benchmarks:
  dacapo2006:
    - {name: eclipse_large, bm_name: eclipse, size: large}
</code></pre>
<h2 id="specjbb2015-preview-"><a class="header" href="#specjbb2015-preview-"><code>SPECjbb2015</code> (preview ⚠️)</a></h2>
<p><a href="https://www.spec.org/jbb2015/">SPECjbb2015</a>.</p>
<h3 id="keys-2"><a class="header" href="#keys-2">Keys</a></h3>
<p><code>release</code>: one of the possible values <code>["1.03"]</code>.
The value is required.</p>
<p><code>path</code>: path to the <code>jar</code>.
The value is required.
Note that the property file should reside in <code>path/../config/specjbb2015.props</code> per the standard folder structure of the ISO image provided by SPEC.
Environment variables will be expanded.</p>
<h3 id="benchmark-specification-1"><a class="header" href="#benchmark-specification-1">Benchmark Specification</a></h3>
<p>Only strings are allowed, which should correspond to the the mode of the SPECjbb2015 controller.
Right now, only <code>"composite"</code> is supported.</p>
<h2 id="specjvm98-preview-"><a class="header" href="#specjvm98-preview-"><code>SPECjvm98</code> (preview ⚠️)</a></h2>
<p><a href="https://www.spec.org/jvm98/">SPECjvm98</a>.</p>
<p>Note that you will need to prepend probes to the classpaths, so that the <a href="https://github.com/anupli/probes/blob/master/SpecApplication.java">modified</a> <code>SpecApplication</code> can be used.</p>
<p>Here is an example configuration file.</p>
<pre><code class="language-yaml">includes:
  - "/home/zixianc/running-ng/src/running/config/base/runbms.yml"

modifiers:
  probes_cp:
    type: JVMClasspathPrepend
    val: "/home/zixianc/MMTk-Dev/evaluation/probes /home/zixianc/MMTk-Dev/evaluation/probes/probes.jar"

benchmarks:
  specjvm98:
    - _213_javac

configs:
  - "adoptopenjdk-8|probes_cp"
</code></pre>
<h3 id="keys-3"><a class="header" href="#keys-3">Keys</a></h3>
<p><code>release</code>: one of the possible values <code>["1.03_05"]</code>.
The value is required.</p>
<p><code>path</code>: path to the SPECjvm98 folder, where you can find <code>SpecApplication.class</code>.
The value is required.
Environment variables will be expanded.</p>
<p><code>timing_iteration</code>: specifying the timing iteration.
It can only be a number, which is passed to SpecApplication as <code>-i</code>.
The value is required.</p>
<h3 id="benchmark-specification-2"><a class="header" href="#benchmark-specification-2">Benchmark Specification</a></h3>
<p>Only strings are allowed, which should correspond to benchmark program of SPECjvm98.
The following are the benchmarks:</p>
<ul>
<li>_200_check</li>
<li>_201_compress</li>
<li>_202_jess</li>
<li>_209_db</li>
<li>_213_javac</li>
<li>_222_mpegaudio</li>
<li>_227_mtrt</li>
<li>_228_jack</li>
</ul>
<h2 id="octane-preview-"><a class="header" href="#octane-preview-"><code>Octane</code> (preview ⚠️)</a></h2>
<h3 id="keys-4"><a class="header" href="#keys-4">Keys</a></h3>
<p><code>path</code>: path to the Octane benchmark folder.
The value is required.
Environment variables will be expanded.</p>
<p><code>wrapper</code>: path to the Octane wrapper written by Wenyu Zhao.
The value is required.</p>
<p><code>timing_iteration</code>: specifying the timing iteration using an integer.
The value is required.</p>
<p><code>minheap</code>: a string that selects one of the <code>minheap_values</code> sets to use.</p>
<p><code>minheap_values</code>: a dictionary containing multiple named sets of minimal heap sizes that is enough for a benchmark from the suite to run without triggering <code>Fatal javascript OOM in ...</code>.
Each size is measured in MiB.
The default value is an empty dictionary.
The minheap values are used only when running <code>runbms</code> with a valid <code>N</code> value.
If the minheap value for a benchmark is not specified, a default of <code>4096</code> is used.
An example looks like this.</p>
<pre><code class="language-yaml">minheap_values:
  d8:
    octane:
      box2d: 5
      codeload: 159
      crypto: 3
</code></pre>
<h2 id="juliagcbenchmarks-preview-"><a class="header" href="#juliagcbenchmarks-preview-"><code>JuliaGCBenchmarks</code> (preview ⚠️)</a></h2>
<p>GC benchmarks for Julia: https://github.com/JuliaCI/GCBenchmarks</p>
<h3 id="keys-5"><a class="header" href="#keys-5">Keys</a></h3>
<p><code>path</code>: path to the GCBenchmarks folder.
The value is required.
Environment variables will be expanded.</p>
<p><code>minheap</code>:  a string that selects one of the <code>minheap_values</code> sets to use.</p>
<p><code>minheap_values</code>: a dictionary containing multiple named sets of minimal heap sizes that is enough for a benchmark from the suite to run without triggering <code>Out of Memory!</code>.
An example looks like this:</p>
<pre><code class="language-yaml">    minheap_values:
      julia-mmtk-immix:
        multithreaded/binary_tree/tree_immutable: 225
        multithreaded/binary_tree/tree_mutable: 384
        multithreaded/bigarrays/objarray: 9225
        serial/TimeZones: 5960
        serial/append: 1563
        serial/bigint/pollard: 198
        serial/linked/list: 4325
        serial/linked/tree: 216
        serial/strings/strings: 2510
        slow/bigint/pidigits: 198
        slow/rb_tree/rb_tree: 8640
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../references/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../references/runtime.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../references/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../references/runtime.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
